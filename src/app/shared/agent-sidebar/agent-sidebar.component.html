<!-- Sidebar Navigation -->
<aside class="w-64 bg-primary text-white flex flex-col fixed h-full right-0 z-40">
  <!-- Logo -->
  <a routerLink="/" class="flex items-center gap-3 p-6 border-b border-white/10 hover:bg-white/5 transition-colors">
    <img src="/Baytology_image.png" alt="Baytology Logo" class="h-10 w-10 rounded-full object-cover">
    <h1 class="text-xl font-bold">Baytology</h1>
  </a>

  <!-- Navigation Links -->
  <nav class="flex flex-col gap-2 p-4">
    
    <!-- للوكلاء فقط: لوحة التحكم وعقاراتي -->
    @if (isAgent()) {

      <a routerLink="/agent-dashboard"
         class="flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors"
         [class]="currentPage() === 'properties' ? 'bg-white/20' : 'hover:bg-white/10'">
        <span class="material-symbols-outlined">apartment</span>
        <p class="text-sm font-medium">عقاراتي</p>
      </a>
    }

    <!-- للمشترين فقط: المفضلة -->
    @if (!isAgent()) {
      <a routerLink="/favorites"
         class="flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors"
         [class]="currentPage() === 'favorites' ? 'bg-white/20' : 'hover:bg-white/10'">
        <span class="material-symbols-outlined">favorite</span>
        <p class="text-sm font-medium">المفضلة</p>
      </a>
    }

    <!-- للجميع: الرسائل -->
    <a routerLink="/messages"
       class="flex items-center justify-between gap-3 px-3 py-2.5 rounded-lg transition-colors"
       [class]="currentPage() === 'messages' ? 'bg-white/20' : 'hover:bg-white/10'">
      <div class="flex items-center gap-3">
        <span class="material-symbols-outlined">mail</span>
        <p class="text-sm font-medium">الرسائل</p>
      </div>
      @if (newMessages() > 0) {
        <span class="bg-secondary text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center">
          {{ newMessages() > 9 ? '9+' : newMessages() }}
        </span>
      }
    </a>

    <!-- للجميع: الإشعارات -->
    <a routerLink="/notifications"
       class="flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors"
       [class]="currentPage() === 'notifications' ? 'bg-white/20' : 'hover:bg-white/10'">
      <span class="material-symbols-outlined">notifications</span>
      <p class="text-sm font-medium">الإشعارات</p>
    </a>

    <!-- للجميع: ملفي الشخصي -->
    <a routerLink="/profile"
       class="flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors"
       [class]="currentPage() === 'profile' ? 'bg-white/20' : 'hover:bg-white/10'">
      <span class="material-symbols-outlined">person</span>
      <p class="text-sm font-medium">ملفي الشخصي</p>
    </a>
  </nav>

  <!-- User Info & Logout -->
  <div class="mt-auto p-4 border-t border-white/10">
    <div class="flex items-center gap-3 mb-4 px-3">
      <img [src]="userAvatar()" alt="صورتك" class="w-10 h-10 rounded-full object-cover border-2 border-white/30">
      <div>
        <p class="text-sm font-bold truncate max-w-[140px]">{{ userName() }}</p>
        <p class="text-xs text-white/70">{{ isAgent() ? 'وكيل عقاري' : 'مشتري' }}</p>
      </div>
    </div>
    <button (click)="logout()" 
            class="flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-white/10 transition-colors w-full cursor-pointer">
      <span class="material-symbols-outlined">logout</span>
      <p class="text-sm font-medium">تسجيل الخروج</p>
    </button>
  </div>
</aside>
