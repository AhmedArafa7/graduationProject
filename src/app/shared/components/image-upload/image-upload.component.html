<div class="w-full max-w-md mx-auto p-6 bg-white dark:bg-gray-800 rounded-xl shadow-md border border-gray-100 dark:border-gray-700">
  <h3 class="text-lg font-bold text-gray-800 dark:text-white mb-4">Upload Property Image</h3>
  
  <!-- Upload Area -->
  <div class="relative border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-8 text-center hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors cursor-pointer group"
       [class.opacity-50]="isUploading()"
       [class.pointer-events-none]="isUploading()">
    
    <input type="file" (change)="onFileSelected($event)" accept="image/*" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer" [disabled]="isUploading()">
    
    <div class="flex flex-col items-center gap-2">
      <span class="material-symbols-outlined text-4xl text-gray-400 group-hover:text-primary transition-colors">add_photo_alternate</span>
      <p class="text-sm font-medium text-gray-600 dark:text-gray-300">
        <span class="text-primary">Click to upload</span> or drag and drop
      </p>
      <p class="text-xs text-gray-400">JPG, PNG, WebP (Max 10MB)</p>
    </div>
  </div>

  <!-- Progress Bar -->
  @if (isUploading()) {
    <div class="mt-6 space-y-2 animate-fade-in">
      <div class="flex justify-between text-xs font-medium text-gray-600 dark:text-gray-300">
        <span>{{ status() }}</span>
        <span>{{ uploadProgress() }}%</span>
      </div>
      <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5 overflow-hidden">
        <div class="h-2.5 bg-primary rounded-full transition-all duration-300 ease-out relative overflow-hidden" 
             [style.width.%]="uploadProgress()">
             <div class="absolute inset-0 bg-white/20 animate-pulse"></div>
        </div>
      </div>
    </div>
  }

  <!-- Success / Preview -->
  @if (imageUrl()) {
    <div class="mt-6 animate-fade-in">
      <div class="flex items-center gap-2 text-green-600 bg-green-50 dark:bg-green-900/20 p-3 rounded-lg mb-3">
        <span class="material-symbols-outlined">check_circle</span>
        <span class="text-sm font-bold">Optimization Complete!</span>
      </div>

      <div class="relative rounded-lg overflow-hidden shadow-sm aspect-video bg-gray-100 dark:bg-gray-900">
        <img [src]="imageUrl()" alt="Uploaded property" class="w-full h-full object-cover">
      </div>
      <p class="text-xs text-center text-gray-500 mt-2">Converted to High-Fidelity WebP</p>
    </div>
  }
</div>
